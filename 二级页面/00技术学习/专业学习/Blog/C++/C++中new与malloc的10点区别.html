<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7853"/>

<div>
<span><div style="padding:8px 0px;margin:8px auto;max-width:700px;"><div style="margin:0;padding:0;background-color:#fff"><div style="margin:0;padding:0"><div style="margin:0;padding:0"><h2 style="margin: 0px 0px 14px; padding: 0px; font-size: 22px;"><span style="margin:0px;"><span style="font-size: 22px; font-weight: 400; line-height: 1.4;">C++中new与malloc的10点区别</span></span></h2><div style="margin: 0px 0px 22px; padding: 0px; font-size: 0px; word-wrap: break-word; word-break: break-all;"><br/></div><div style="margin: 0px; padding: 0px; overflow: hidden; font-size: 17px; word-wrap: break-word; text-align: justify; position: relative; z-index: 0;"><h3 style="margin: 1.5em 5px 2em 0px; padding: 8px 15px; font-size: 1.3em; letter-spacing: 2px; background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181)); background-color: rgb(63, 81, 181); border-left: 10px solid rgb(51, 51, 51); border-radius: 5px; text-shadow: rgb(102, 102, 102) 1px 1px 1px; box-shadow: rgb(102, 102, 102) 1px 1px 2px; text-align: start; white-space: normal; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 20px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(255, 255, 255); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold;">new与malloc的10点区别</span></h3><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">1、申请的内存所在位置</span></strong></span></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new操作符从自由存储区（free store）上为对象动态分配内存空间，而malloc函数从堆上动态分配内存。自由存储区是C++基于new操作符的一个抽象概念，凡是通过new操作符进行内存申请，该内存即为自由存储区。而堆是操作系统中的术语，是操作系统所维护的一块特殊内存，用于程序的内存动态分配，C语言使用malloc从堆上分配内存，使用free释放已分配的对应内存。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">那么自由存储区是否能够是堆（问题等价于new是否能在堆上动态分配内存），这取决于operator new 的实现细节。自由存储区不仅可以是堆，还可以是静态存储区，这都看operator new在哪里为对象分配内存。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">特别的，new甚至可以不为对象分配内存！定位new的功能可以办到这一点：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> (place_address) </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">type</span></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">place_address为一个指针，代表一块内存的地址。当使用上面这种仅以一个地址调用new操作符时，new操作符调用特殊的operator new，也就是下面这个版本：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> * </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">size_t</span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">,</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> *)</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//不允许重定义这个版本的operator new</span></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">这个operator new不分配任何的内存，它只是简单地返回指针实参，然后右new表达式负责在place_address指定的地址进行对象的初始化工作。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">2、返回类型安全性</span></strong></span></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new操作符内存分配成功时，返回的是对象类型的指针，类型严格与对象匹配，无须进行类型转换，故new是符合类型安全性的操作符。而malloc内存分配成功则是返回void * ，需要通过强制类型转换将void*指针转换成我们需要的类型。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">类型安全很大程度上可以等价于内存安全，类型安全的代码不会试图方法自己没被授权的内存区域。关于C++的类型安全性可说的又有很多了。</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">3、内存分配失败时的返回值</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new内存分配失败时，会抛出bac_alloc异常，它不会返回NULL；malloc分配内存失败时返回NULL。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">在使用C语言时，我们习惯在malloc分配内存后判断分配是否成功：</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *a  = (</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *)</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">malloc</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> ( </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">sizeof</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> (</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> ));</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">if</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">NULL</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> == a)</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    ...</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">else</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    ...</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">从C语言走入C++阵营的新手可能会把这个习惯带入C++：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * a = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">();</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">if</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">NULL</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> == a)</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    ...</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">else</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{   </span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    ...</span></div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">实际上这样做一点意义也没有，因为new根本不会返回NULL，而且程序能够执行到if语句已经说明内存分配成功了，如果失败早就抛异常了。正确的做法应该是使用异常机制：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">try</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *a = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">();</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">catch</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> (bad_alloc)</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    ...</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">如果你想顺便了解下异常基础，可以看h</span><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(80, 125, 201); text-decoration: underline;">ttp://www.cnblogs.com/QG-whz/p/5136883.html</span><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">C++ 异常机制分析。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">4、是否需要指定内存大小</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">使用new操作符申请内存分配时无须指定内存块的大小，编译器会根据类型信息自行计算，而malloc则需要显式地指出所需内存的尺寸。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">class</span><span style="color: rgb(169, 183, 198); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">A</span><span style="color: rgb(169, 183, 198); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">{</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">...}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">2</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> A * ptr = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> A;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">3</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> A * ptr = (A *)</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">malloc</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">sizeof</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(A)); </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(128, 128, 128); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//需要显式指定所需内存大小sizeof(A);</span></div></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">当然了，我这里使用malloc来为我们自定义类型分配内存是不怎么合适的，请看下一条。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">5、是否调用构造函数/析构函数</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51); font-weight: bold;">使用new操作符来分配对象内存时会经历三个步骤：</span></strong></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">第一步：调用operator new 函数（对于数组是operator new[]）分配一块足够大的，原始的，未命名的内存空间以便存储特定类型的对象。</span></div></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">第二步：编译器运行相应的构造函数以构造对象，并为其传入初值。</span></div></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">第三部：对象构造完成后，返回一个指向该对象的指针。</span></div></li></ul><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51); font-weight: bold;">使用delete操作符来释放对象内存时会经历两个步骤：</span></strong></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><ul style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:disc"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">第一步：调用对象的析构函数。</span></div></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">第二步：编译器调用operator delete(或operator delete[])函数释放内存空间。</span></div></li></ul><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">总之来说，new/delete会调用对象的构造函数/析构函数以完成对象的构造/析构。而malloc则不会。如果你不嫌啰嗦可以看下我的例子：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">class</span> <span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">A</span></span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(169, 183, 198); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">public</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">:</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    A() :a(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">), b(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1.11</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">){}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">private</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">:</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> a;</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">double</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> b;</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">};</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span> <span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">main()</span></span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    A * ptr = (A*)</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">malloc</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">sizeof</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(A));</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">return</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">0</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">在return处设置断点，观看ptr所指内存的内容：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: center; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="color: rgb(51, 51, 51); font-size: 17px;"><img src="C++中new与malloc的10点区别_files/640.png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;border-width:0;border-style:initial;border-color:initial"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">可以看出A的默认构造函数并没有被调用，因为数据成员a,b的值并没有得到初始化，这也是上面我为什么说使用malloc/free来处理C++的自定义类型不合适，其实不止自定义类型，标准库中凡是需要构造/析构的类型通通不合适。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">而使用new来分配对象时：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span> <span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">main()</span></span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">2 </span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">3</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">     A * ptr = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> A;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">4</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> }</span></div></div></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;text-align:left"></p><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">查看程序生成的汇编代码可以发现，A的默认构造函数被调用了：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: center; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);"><img src="C++中new与malloc的10点区别_files/640 [1].png" type="image/png" data-filename="640.png" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">6、对数组的处理</span></strong></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">C++提供了new[]与delete[]来专门处理数组类型:</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">A * ptr = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> A[</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">10</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">];</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(128, 128, 128); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//分配10个A对象</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">使用new[]分配的内存必须使用delete[]进行释放：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> [] ptr;</span></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new对数组的支持体现在它会分别调用构造函数函数初始化每一个数组元素，释放对象时为每个对象调用析构函数。注意delete[]要与new[]配套使用，不然会找出数组对象部分释放的现象，造成内存泄漏。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">至于malloc，它并知道你在这块内存上要放的数组还是啥别的东西，反正它就给你一块原始的内存，在给你个内存的地址就完事。所以如果要动态分配一个数组的内存，还需要我们手动自定数组的大小：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * ptr = (</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *) </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">malloc</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">( </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">sizeof</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">int</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">) );</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(128, 128, 128); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//分配一个10个int元素的数组</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">7、new与malloc是否可以相互调用</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">operator new /operator delete的实现可以基于malloc，而malloc的实现不可以去调用new。下面是编写operator new /operator delete 的一种简单方式，其他版本也与之类似：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> * </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">sieze_t</span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> size)</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">if</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * mem = </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">malloc</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(size)</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">        </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">return</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> mem;</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">else</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">        </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">throw</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> bad_alloc();</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *mem) </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">{</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">    </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">free</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(mem);</span></div><div><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">}</span></div></div></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></h2><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">8、是否可以被重载</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">opeartor new /operator delete可以被重载。标准库是定义了operator new函数和operator delete函数的8个重载版本：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(128, 128, 128); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//这些版本可能抛出异常</span></div><div><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> * </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">new(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">size_t</span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">)</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">[](</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">size_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">);</span></div><div><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> * </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> * )</span><span style="margin: 0px; padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">[](</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">0</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">）</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(128, 128, 128); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">//这些版本承诺不抛出异常</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">size_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> ,</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">nothrow_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">&amp;) </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">new</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">[](</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">size_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">, </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">nothrow_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">&amp; );</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> (</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *,</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">nothrow_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">&amp; )</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> * </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">operator</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">delete</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">[](</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> *</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">0</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">,</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">nothrow_t</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">&amp; ）</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">noexcept</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">我们可以自定义上面函数版本中的任意一个，前提是自定义版本必须位于全局作用域或者类作用域中。太细节的东西不在这里讲述，总之，我们知道我们有足够的自由去重载operator new /operator delete ,以决定我们的new与delete如何为对象分配内存，如何回收对象。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">而malloc/free并不允许重载。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">9、能够直观地重新分配内存</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">使用malloc分配的内存后，如果在使用过程中发现内存不足，可以使用realloc函数进行内存重新分配实现内存的扩充。realloc先判断当前的指针所指内存是否有足够的连续空间，如果有，原地扩大可分配的内存地址，并且返回原来的地址指针；如果空间不够，先按照新指定的大小分配空间，将原有数据从头到尾拷贝到新分配的内存区域，而后释放原来的内存区域。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new没有这样直观的配套设施来扩充内存。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><h2 style="font-size: 16px; margin: 0px; padding: 0px; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><span style="margin: 0px; padding: 0px; font-size: 16px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(171, 25, 66); font-weight: bold;">10、客户处理内存分配不足</span></strong></h2><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">在operator new抛出异常以反映一个未获得满足的需求之前，它会先调用一个用户指定的错误处理函数，这就是new-handler。new_handler是一个指针类型：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">namespace</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">std</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">2</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> {</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">3</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">     </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">typedef</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(165, 218, 45); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">void</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(255, 152, 35); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(*new_handler)</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(255, 152, 35); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">()</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">4</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> }</span></div></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">指向了一个没有参数没有返回值的函数,即为错误处理函数。为了指定错误处理函数，客户需要调用set_new_handler，这是一个声明于的一个标准库函数:</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; font-size: 16px; text-align: start; background-color: rgb(255, 255, 255); max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><div style="margin: 0px 2px; padding: 0.5em; font-size: 14px; border-radius: 0px; background: rgb(40, 43, 46); overflow-x: auto; letter-spacing: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: normal !important; word-break: normal !important; overflow-y: auto !important;"><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">1</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">namespace</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(248, 35, 117); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">std</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">2</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> {</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">3</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">     </span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;">new_handler </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(165, 218, 45); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">set_new_handler</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(255, 152, 35); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">(new_handler p )</span><span style="color: rgb(248, 35, 117); font-size: inherit; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px; margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; word-wrap: break-word; overflow-wrap: inherit; word-break: inherit;"> </span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(165, 218, 45); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">throw</span><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(255, 152, 35); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">()</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">;</span></div><div><span style="margin: 0px; padding: 0px; font-size: inherit; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; overflow-wrap: inherit !important; word-break: inherit !important; color: rgb(174, 135, 250); font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;">4</span><span style="color: rgb(169, 183, 198); font-size: 14px; font-family: Consolas, Inconsolata, Courier, monospace; line-height: 18px;"> }</span></div></div></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">set_new_handler的参数为new_handler指针，指向了operator new 无法分配足够内存时该调用的函数。其返回值也是个指针，指向set_new_handler被调用前正在执行（但马上就要发生替换）的那个new_handler函数。</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">对于malloc，客户并不能够去编程决定内存不足以分配时要干什么事，只能看着malloc返回NULL。</span></div><h3 style="margin: 1.5em 5px 2em 0px; padding: 8px 15px; font-size: 1.3em; letter-spacing: 2px; background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181)); background-color: rgb(63, 81, 181); border-left: 10px solid rgb(51, 51, 51); border-radius: 5px; text-shadow: rgb(102, 102, 102) 1px 1px 1px; box-shadow: rgb(102, 102, 102) 1px 1px 2px; text-align: start; white-space: normal; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 20px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(255, 255, 255); font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold;">总结</span></h3><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">将上面所述的10点差别整理成表格：</span></div><table style="box-sizing: border-box !important; word-wrap: break-word !important; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; background-color: rgb(250, 250, 250); border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">特征</span></td><td style="border-collapse: collapse; text-align: left; background-color: rgb(250, 250, 250); border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">new/delete</span></td><td style="border-collapse: collapse; text-align: left; background-color: rgb(250, 250, 250); border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">malloc/free</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">分配内存的位置</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">自由存储区</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">堆</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">内存分配失败返回值</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">完整类型指针</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">void*</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">内存分配失败返回值</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">默认抛出异常</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">返回NULL</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">分配内存的大小</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">由编译器根据类型计算得出</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">必须显式指定字节数</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">处理数组</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">有处理数组的new版本new[]</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">需要用户计算数组的大小后进行内存分配</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">已分配内存的扩充</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">无法直观地处理</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">使用realloc简单完成</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">是否相互调用</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">可以，看具体的operator new/delete实现</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">不可调用new</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">分配内存时内存不足</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">客户能够指定处理函数或重新制定分配器</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">无法通过用户代码进行处理</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">函数重载</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">允许</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">不允许</span></td></tr><tr style="padding: 0px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">构造函数与析构函数</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">调用</span></td><td style="border-collapse: collapse; text-align: left; border: 1px solid rgb(192, 192, 192); box-sizing: border-box !important; word-wrap: break-word !important; width: 130px; padding: 8px;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">不调用</span></td></tr></tbody></table><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">malloc给你的就好像一块原始的土地，你要种什么需要自己在土地上来播种</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: center; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="color: rgb(51, 51, 51); font-size: 17px;"><img src="C++中new与malloc的10点区别_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important;border-width:0;border-style:initial;border-color:initial"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">而new帮你划好了田地的分块（数组），帮你播了种（构造函数），还提供其他的设施给你使用:</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:15px"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: center; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);"><img src="C++中new与malloc的10点区别_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;height:auto !important"/></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; text-align: left; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">当然，malloc并不是说比不上new，它们各自有适用的地方。</span><span style="margin: 0px; padding: 0px; font-size: 15px; max-width: 100% !important; box-sizing: border-box !important; word-wrap: break-word !important; color: rgb(51, 51, 51);">在C++这种偏重OOP的语言，使用new/delete自然是更合适的。</span></div></div></div></div></div></div><div><br/></div></span>
</div></body></html> 